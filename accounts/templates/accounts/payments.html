{% extends 'base.html' %}
{% load static %}

{% block title %}Выплаты | Volida{% endblock %}

{% block page_title %}Выплаты{% endblock %}

{% block content %}
<div class="navigation-link">
    <a href="{% url 'suppliers' %}" class="btn btn-secondary btn-sm">
        <i class="fas fa-arrow-left"></i> Назад
    </a>
</div>

<div class="payment-form-container mt-20">
    <form id="paymentForm">
        <div class="form-row">
            <div class="form-col">
                <div class="form-group">
                    <label for="paymentDate">Дата:</label>
                    <input type="date" id="paymentDate" name="paymentDate" class="form-control" value="2025-04-25">
                </div>
            </div>
        </div>
        
        <div class="payment-selection">
            <h3>Выплаты</h3>
            <div class="form-group">
                <label for="batchNumber">Номер партии</label>
                <div class="select-wrapper">
                    <select id="batchNumber" name="batchNumber" class="form-control">
                        <option value="" disabled selected>Выберите номер партии...</option>
                        <option value="92">92</option>
                        <option value="90">90</option>
                        <option value="89">89</option>
                        <option value="88">88</option>
                        <option value="87">87</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div id="paymentDetails" class="payment-details" style="display: none;">
            <div class="details-header">
                <h4>Перечень товаров</h4>
            </div>
            
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label for="batchId">№</label>
                        <input type="text" id="batchId" name="batchId" class="form-control" value="10" readonly>
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label for="batchAmount">Сумма партии</label>
                        <input type="text" id="batchAmount" name="batchAmount" class="form-control" value="10" readonly>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="paymentType">Вид оплаты</label>
                <input type="text" id="paymentType" name="paymentType" class="form-control" value="Перечисление" readonly>
            </div>
            
            <div class="form-group">
                <label for="amount">Сумма</label>
                <input type="text" id="amount" name="amount" class="form-control" value="110 000 000">
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary" id="savePaymentBtn" style="display: none;">
                <i class="fas fa-save"></i> Сохранить
            </button>
        </div>
    </form>
</div>

<!-- Таблица выплат -->
<div class="card mt-20">
    <div class="card-header">
        <h3>Выплаты</h3>
    </div>
    <div class="card-body">
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Дата</th>
                        <th>Товар</th>
                        <th>Количество</th>
                        <th>Цена</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>92</td>
                        <td>10.10.2024</td>
                        <td>Бутылки 0.5 литр</td>
                        <td>20</td>
                        <td>1 500 000</td>
                    </tr>
                    <tr>
                        <td>80</td>
                        <td>15.08.2024</td>
                        <td>Фольга смет.20%</td>
                        <td>12</td>
                        <td>500 000</td>
                    </tr>
                    <tr>
                        <td>73</td>
                        <td>10.10.2024</td>
                        <td>Этикетка йог.Шафтоли</td>
                        <td>100</td>
                        <td>10 500 000</td>
                    </tr>
                    <tr>
                        <td>70</td>
                        <td>15.08.2024</td>
                        <td>Фольга смет.20%</td>
                        <td>12</td>
                        <td>500 000</td>
                    </tr>
                    <tr>
                        <td>68</td>
                        <td>10.10.2024</td>
                        <td>Этикетка йог.Шафтоли</td>
                        <td>80</td>
                        <td>8 000 000</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Пагинация -->
        <div class="pagination-container">
            <ul class="pagination">
                <li><a href="#" class="previous"><i class="fas fa-angle-left"></i></a></li>
                <li><a href="#" class="page-link">5</a></li>
                <li><a href="#" class="page-link">...</a></li>
                <li><a href="#" class="page-link">10</a></li>
                <li class="active"><a href="#" class="page-link">11</a></li>
                <li><a href="#" class="page-link">12</a></li>
                <li><a href="#" class="page-link">13</a></li>
                <li><a href="#" class="page-link">14</a></li>
                <li><a href="#" class="page-link">15</a></li>
                <li><a href="#" class="page-link">16</a></li>
                <li><a href="#" class="page-link">...</a></li>
                <li><a href="#" class="page-link">428</a></li>
                <li><a href="#" class="next"><i class="fas fa-angle-right"></i></a></li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .payment-form-container {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
        padding: 25px;
    }
    
    .payment-selection {
        margin: 20px 0;
        background-color: #f5f7fa;
        padding: 20px;
        border-radius: 8px;
    }
    
    .payment-selection h3 {
        margin-top: 0;
        margin-bottom: 15px;
        font-size: 18px;
        color: #333;
    }
    
    .payment-details {
        margin: 20px 0;
        background-color: #f5f7fa;
        padding: 20px;
        border-radius: 8px;
    }
    
    .details-header {
        margin-bottom: 15px;
    }
    
    .details-header h4 {
        margin: 0;
        font-size: 16px;
        color: #333;
    }
    
    .navigation-link {
        margin-bottom: 20px;
    }
    
    .pagination-container {
        margin-top: 20px;
        display: flex;
        justify-content: center;
    }
    
    .pagination {
        display: flex;
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .pagination li {
        margin: 0 5px;
    }
    
    .pagination li a {
        display: inline-block;
        padding: 8px 12px;
        border-radius: 4px;
        background-color: #fff;
        border: 1px solid #ddd;
        color: #333;
        text-decoration: none;
    }
    
    .pagination li.active a {
        background-color: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }
</style>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const paymentForm = document.getElementById('paymentForm');
        const batchNumberSelect = document.getElementById('batchNumber');
        const paymentDetails = document.getElementById('paymentDetails');
        const savePaymentBtn = document.getElementById('savePaymentBtn');
        
        // Показать детали платежа при выборе номера партии
        batchNumberSelect.addEventListener('change', function() {
            if (this.value) {
                paymentDetails.style.display = 'block';
                savePaymentBtn.style.display = 'inline-flex';
            } else {
                paymentDetails.style.display = 'none';
                savePaymentBtn.style.display = 'none';
            }
        });
        
        paymentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Функционал сохранения будет реализован в будущем с интеграцией базы данных.');
            // Имитация успешного сохранения
            paymentDetails.style.display = 'none';
            savePaymentBtn.style.display = 'none';
            batchNumberSelect.selectedIndex = 0;
        });
    });
</script>
{% endblock %}